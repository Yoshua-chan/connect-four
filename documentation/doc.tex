\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage[OT4]{fontenc}
\usepackage{polski}
% \usepackage{lmodern}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}
\usepackage[a4paper, margin={2.54cm, 1.54cm}]{geometry}
\usepackage{graphicx}
\usepackage{titlesec}
\usepackage{titling}
\usepackage{enumitem}

% # TODO: Add a stylised code block for use in code snippets and function names
% # TODO: Stylise the page with 'geometry' package
% # TODO: Make a title page for the document
% # TODO: Format the style of the document

\titleformat{\section}
{\LARGE \bfseries}
{\thesection.}
{0.5em}
{}[\titlerule]

\titleformat{\subsection}
{\Large \bfseries}
{\thesubsection.}
{0.5em}
{}[]

% \renewcommand{\labelenumii}{\theenumi.\theenumii.}
\setlist[enumerate]{label*=\arabic*.}


\graphicspath{ {./img/} }

\input{tex/titlepage.tex}

\setDepartment{Elektronika I}
\setGroup{czwartek 14:40}
\setFaculty{Elektronika I}
\setReviewer{Rafał Frączek}
\setSupervisor{Rafał Frączek}

\title{Connect Four}
\author{Kacper Filipek}
\date{\today}

\begin{document}

\fontfamily{cmss}
\selectfont

\maketitle

\newpage

\section{Opis projektu}

Projekt jest realizcją gry w "Czwórki" (ang. "Connect Four") w C++, z interfejsem TUI (t.j. interfejs używający znaków specjalnych i kolorów do rysowania interfejsu użytkownika w konsoli). 

\section{Project description}

The project is a realisation of the game "Connect Four" made in C++ with TUI interface (an interface using special characters for drawing UI in the terminal)

\section{Instrukcja użytkownika}

Po włączeniu programu wyświetla się menu główne z następującymi opcjami:
\begin{itemize}
    \item Play - rozpoczyna grę w bieżącymi ustawieniami
    \item Load game - umożliwia wczytanie pliku z zapisem gry
    \item Options - otwiera menu umożliwiające zmianę ustawień gry
    \item Quit game - wychodzi z programu
\end{itemize}

Wciśnięcie klawisza Escape spowoduje pauzę w grze i wyświetlenie się menu z następującymi opcjami:
\begin{itemize}
    \item Resume - wznawia przebieg gry (alternatywnie można ponownie wcisnąć Escape)
    \item Save game - zapisuje stan gry do pliku
    \item Main menu - kończy grę i przechodzi do głównego menu bez zapisu
\end{itemize}

Wybranie "Load game" wyświetla użytkownikowi pole tekstowe, do którego należy wpisać nazwę pliku z zapisem gry. W przypadku błędu w odczycie pliku, wyświetli się komunikat powiadamiający o wystąpieniu błędu.

W menu "Options" można zmienić następujące parametry:
\begin{itemize}
    \item Board width - szerokość planszy do gry (domyślnie 7)
    \item Board height - wysokość planszy do gry (domyślnie 5)
    \item Victory condition - liczba żetonów w sekwencji potrzebna do wygrania gry (domyślnie 4)
\end{itemize}

\section{Kompilacja}

Program został napisany na systemy operacyjne z rodziny Linux, 
chociaż powinien on działać na Windowsie, ponieważ kod nie 
używa żadnych zależnych od platformy plików nagłówkowych. 
Program używa  systemu CMake do budowania projektu. 
Można skompilować go na dwa sposoby:
    \begin{itemize}
         
    \item Sposób 1:
        \begin{enumerate}
            \item Wejść do folderu \texttt{build/}
            \item Wykonać polecenie \texttt{cmake ..}
        \end{enumerate}

    \item Sposób 2:
        \begin{enumerate}
            \item Z katalogu głównego wywołać skrypt \texttt{./bld.sh}. Ze względu na fakt, że skrypt wywołuje program make, może on nie działać na Windowsie.
        \end{enumerate}

    \end{itemize}

Po zbudowaniu powienien się plik wykonywalny o \texttt{./build/connect-four}.
Z uwagi na fakt, że ścieżki do zasobów są wpisane w programie relatywnie 
do głównego katalogu, to program wykonywalny powinien z niego wywoływany.

\section{Pliki źródłowe}

W tym punkcie należy opisać wszystkie pliki źródłowe (\texttt{.cpp}, \texttt{.h}) w projekcie. Należy podać nazwę każdego pliku oraz informację o tym co się w nim znajduje. Na przykład:
Projekt składa się z następujących plików źródłowych:
    \begin{itemize}
    \item \texttt{board.h}, \texttt{board.cpp} – deklaracja oraz implementacja klasy Board,
    \item \texttt{game.h}, \texttt{game.cpp} – deklaracja oraz implementacja klasy Game,
    \item \texttt{menu.h}, \texttt{menu.cpp} – deklaracja oraz implementacja klasy Menu.
    \item \texttt{extras.h}, \texttt{extras.cpp} – deklaracja oraz implementacja funkcji pomocniczych.
    \item \texttt{color.h} – definicje procesora nazw kolorów do użycia w funkcjach biblioteki ncurses.
    \item \texttt{main.cpp} – główny plik z implementacją funkcji main.
    \end{itemize}

\section{Zależności}

W projekcie wykorzystano następujące dodatkowe biblioteki:
    \begin{itemize}
    \item ncurses – biblioteka do interakcji z emulatorem terminala,  
    pozwala  tworzyć zaawansowane interfejsy konsolowe:\\
    \url{https://invisible-island.net/ncurses/}
    \end{itemize}
\section{Opis klas}

W projekcie utworzono następujące klasy:
\begin{itemize}
    \item \texttt{Menu} - klasa reprezentująca menu główne programu
        \begin{itemize}
            \item \texttt{Menu()}
            \item \texttt{GameParameters Start()} - rozpoczyna pętlę klasy \texttt{Menu} i zwraca strukturę z parametrami gry po jej zakończeniu
        \end{itemize}

    \item \texttt{Game} - klasa reprezentująca stan i właściwy przebieg rogrywki
        \begin{itemize}
            \item \texttt{Game()} - domyślny konstruktor klasy \texttt{Game}
            \item \texttt{void Start()} - ustawia parametry i rozpoczyna pętlę gry
            \item \texttt{void set\_parameters(GameParameters parameters)} - ustawia parametry gry na podstawie podanego argumentu
            \item \texttt{void load\_game(const std::string\& path)} - wczytuje zapis gry z pliku podanego przez \texttt{path}
        \end{itemize}

    \item \texttt{Board} - klasa reprezentująca planszę do gry
        \begin{itemize}
            \item \texttt{Board()} - domyślny konstruktor, ustawiający domyślne parametry
            \item \texttt{Board(uint8\_t board\_rows, uint8\_t board\_columns)} - konstruktor parametryczny ustawia rozmiar planszy na \texttt{board\_rows} $\times$ \texttt{board\_rows}
            \item \texttt{uint16\_t get\_columns()} - zwraca liczbę kolumn planszy
            \item \texttt{uint16\_t get\_rows()} - zwraca liczbę wierszy planszy
            \item \texttt{uint16\_t get\_win\_condition()} - zwraca warunek zwycięstwa
            \item \texttt{void set\_win\_condition()} - ustawia warunek zwycięstwa
            \item \texttt{void set\_dimensions(uint16\_t rows, uint16\_t columns)} - ustawia wymiary planszy
            \item \texttt{uint8\_t check\_victory()} - sprawdza czy któryś z graczy wygrał
        \end{itemize}
\end{itemize}
     
\section{Zasoby}

W projekcie wykorzystywane są następujące pliki zasobów:
    \begin{itemize}
    \item \texttt{assets/} – katalog zawierający dodatkowe zasoby do gry.\\
    Struktura katalogu:
        \begin{itemize}
            \item \texttt{logo1.txt}, \texttt{logo2.txt} – pliki zawierające tekstowe logo pojawiające się na ekranie startowym.
        \end{itemize}
    \end{itemize}

\section{Dalszy rozwój i ulepszenia}

\section{Inne}

\subsection{Format zapisu}

Stan gry jest zapisywany do pliku w formie binarnej. Poniżej podane są po kolei bajty oznaczające konkretne parametry gry oraz ich rozmiary w pliku

\begin{enumerate}
\item Liczba graczy - 1 bajt (unsigned)
\item Aktualny gracz - 1 bajt (unsigned)
\item Wymiary planszy - 4 bajty (unsigned)
  \begin{enumerate}
    \item liczba wierszy w planszy - 2 bajty (unsigned)
    \item liczba kolumn w planszy - 2 bajty (unsigned)
  \end{enumerate}
\item Warunek zwycięstwa - 2 bajty (unsigned)
\item zawartość planszy - każdej komórce odpowiada jeden bajt, więc rozmiar tej sekcji w bajtach, to liczba kolumn $\times$ liczba wierszy (unsigned)
\end{enumerate}

Parametry większe niż jeden bajt są zapisywane w formacie little endian (najmniej znaczący bajt na początku).

\end{document}

